<% if logged_in? %>
    <% if current_user == @user %>
        Welcome Home <%= @user.name %>
        <%= @user.name %>, <%= @user.email %>
        <span id: "subscribers">Subscribers: <%= @user.subscribers.length %></span>
        <span id: "subscriptions">Subscriptions: <%= @user.subscriptions.where(subscribed_to_type: "User").length %></span>
    <% else %>
        Viewing Profile of: <%= @user.name %>
        <% if current_user.subscriptions.exists?(subscribed_to: @user) %>
            <span>You're a Subscriber!</span>
        <% else %>
            <%= link_to 'Subscribe', {:controller => "subscriptions", :action => "create", :user_id => current_user, :subscribed_to_id => @user, :subscribed_to_type => "User"}, :method => :post %>
        <% end %>
    <% end %>
<% else %>
        Profiles are not public, please register!
<% end %>
